---
layout: archive
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

{% if page.url != "/" and site.breadcrumbs %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  <div class="archive">
    {% unless page.header.overlay_color or page.header.overlay_image %}
      <h1 id="page-title" class="page__title">{{ page.title }}</h1>
    {% endunless %}

    {% for post in paginator.posts limit: site.paginate %}
      {% if post %}
        {% assign category = "" %}
        {% for cat in post.categories limit: 3 %}
          <!-- 기존 home_hero.html의 내용 유지 -->
        {% endfor %}
        {% if category == empty %}{% assign category = nil %}{% endif %}
        
        {% assign filter = page.header.overlay_filter | default: post.header.overlay_filter %}
        {% assign color = page.header.overlay_color | default: post.header.overlay_color %}

        {% assign image = nil %}
        {% assign color = nil %}
        {% if post.header.overlay_image %}      
          {% capture image %}{{ post.header.overlay_image }}{% endcapture %}
        {% elsif post.header.image %}      
          {% capture image %}{{ post.header.image }}{% endcapture %}
        {% else %}
          {% unless color %}
            {% assign min = 96 %}
            {% assign max = 160 %}
            {% assign diff = max | minus: min %}
            {% assign r = "now" | date: "%N" | modulo: diff | plus: min %}
            {% assign g = "now" | date: "%N" | modulo: diff | plus: min %}
            {% assign b = "now" | date: "%N" | modulo: diff | plus: min %}
            {% capture color %}rgb({{ r }},{{ g }},{{ b }}){% endcapture %}
          {% endunless %}      
        {% endif %}

        {% include excerpt_hero.html %}
      {% endif %}
    {% endfor %}
    {% include paginator.html %}
  </div>

  <!-- 사이드바 추가 -->
  {% include sidebar.html %}
</div>
